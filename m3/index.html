<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>Sound Network</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="https://code.jquery.com/jquery-2.1.4.min.js" ></script>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" integrity="sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ==" crossorigin="anonymous">
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js" integrity="sha512-K1qjQ+NcF2TYO/eI3M6v8EiNYZfA95pQumfvcVrTHtwQVDG+aHRqLi/ETn2uB+1JqwYqVG3LIvdm9lj6imS/pQ==" crossorigin="anonymous"></script>
        <script>
            $(document).ready(function(){
                $("#console").html("documnet ready.<br/>");
                
                var contextClass = (window.AudioContext ||
                window.webkitAudioContext ||
                window.mozAudioContext ||
                window.oAudioContext ||
                window.msAudioContext);
        
                if (contextClass) {
                    var context = new contextClass();
                    var gainValue = 0.1;
                    var gainNode = context.createGain ? context.createGain() : context.createGainNode();
                    var oscillator;

                    $("#console").append("create context success.<br/>");
                }else{
                    $("#console").append("create context fail.<br/>");
                }
                
                var oscOn = function (freq) {
                    oscillator = context.createOscillator();
                    oscillator.frequency.value = freq;
                    oscillator.connect(gainNode);
                    gainNode.connect(context.destination);
                    gainNode.gain.value = 0.5;
                    if (oscillator.type === parseInt(oscillator.type)) {
                        oscillator.type = 0;
                    } else {
                        oscillator.type = "sine";
                    }
                    oscillator.start ? oscillator.start(0) : oscillator.noteOn(0)
                };
                
                $("#playBtn").click(function(){
                    $("#console").append("click play button.<br/>");
                    oscOn(440);
                })
                
                $("#stopBtn").click(function(){
                    $("#console").append("click stop button.<br/>");
                    oscillator.disconnect();
                })
            });
        </script>
    </head>
    <body>
        <div class="container">
            <h1>Sound Network</h1>
            <div id="controller" style="margin-top: 30px;">
                <button class="btn btn-default btn-large" id="playBtn">PLAY</button>
                <button class="btn btn-default btn-large" id="stopBtn">STOP</button>
            </div>
            <hr/>
            <h3>console</h3>
            <samp>
                <div id="console" class="bg-info" style="padding: 10px"></div>
            </samp>
        </div>
    </body>
</html>
